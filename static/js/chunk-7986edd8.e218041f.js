(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7986edd8"],{"37c8":function(e,t,n){t.f=n("2b4c")},"3a72":function(e,t,n){var i=n("7726"),r=n("8378"),a=n("2d00"),o=n("37c8"),l=n("86cc").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:o.f(e)})}},"6dc8":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("d4ec"),r=n("bee2"),a=n("ec35"),o=function(){function e(t,n){Object(i["a"])(this,e),this.viewer=t,this.entity=void 0,this.url=n.modeluri,this.time=n.time,this.start=void 0,this.stop=void 0,this.Lines=n.Lines,this.isPathShow=n.isPathShow,this.click=n.click,this.callback=n.callback,this.property=this.ComputeRoamingLineProperty(n.Lines,n.time,n.start),this.InitRoaming(this.property,this.start,this.stop,this.isPathShow)}return Object(r["a"])(e,[{key:"ComputeRoamingLineProperty",value:function(e,t){var n=new a.SampledPositionProperty,i=e.length,r=t-t%i,o=r/i,l=a.JulianDate.now();this.start=l;var s=a.JulianDate.addSeconds(l,r,new a.JulianDate);this.stop=s,this.viewer.clock.startTime=l.clone(),this.viewer.clock.stopTime=s.clone(),this.viewer.clock.currentTime=l.clone(),this.viewer.clock.clockRange=a.ClockRange.LOOP_STOP,this.viewer.clock.multiplier=10;for(var c=0;c<i;c++){var u=a.JulianDate.addSeconds(l,c*o,new a.JulianDate),p=a.Cartesian3.fromDegrees(e[c].lng,e[c].lat,e[c].height);n.addSample(u,p)}return n}},{key:"InitRoaming",value:function(e,t,n,i){this.entity=this.viewer.entities.add({availability:new a.TimeIntervalCollection([new a.TimeInterval({start:t,stop:n})]),position:e,orientation:new a.VelocityOrientationProperty(e),click:!0,callback:this.callback,model:{uri:this.url,minimumPixelSize:64,maximumSize:128,maximumScale:200,show:!0,heightReference:a.HeightReference.CLAMP_TO_GROUND,silhouetteColor:a.Color.WHITE,debugWireframe:!1,debugShowBoundingVolume:!1,scale:20,runAnimations:!0},path:{resolution:1,material:new a.PolylineGlowMaterialProperty({glowPower:.1,color:a.Color.YELLOW}),width:10,show:i}}),this.entity.position.setInterpolationOptions({interpolationDegree:5,interpolationAlgorithm:a.LagrangePolynomialApproximation})}},{key:"PauseOrContinue",value:function(e){this.viewer.clock.shouldAnimate=e}},{key:"ChangeRoamingSpeed",value:function(e){this.viewer.clock.multiplier=e}},{key:"EndRoaming",value:function(){void 0!==this.entity&&(this.viewer.clock.multiplier=1,this.viewer.clock.shouldAnimate=!0,this.viewer.entities.remove(this.entity))}}]),e}()},"7bbc":function(e,t,n){var i=n("6821"),r=n("9093").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return r(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?l(e):r(i(e))}},"85de":function(e,t,n){"use strict";var i=n("53ca"),r=(n("ac4d"),n("8a81"),n("ac6a"),n("7f7f"),n("ec35"));function a(e){e||(e={}),this.viewer=e.viewer,this.viewer.scene.globe.showGroundAtmosphere=e.showGroundAtmosphere}function o(e,t,n,i,a){var o="uniform sampler2D colorTexture;uniform sampler2D depthTexture;varying vec2 v_textureCoordinates;uniform vec4 u_scanCenterEC;uniform vec3 u_scanPlaneNormalEC;uniform float u_radius;uniform vec4 u_scanColor;vec4 toEye(in vec2 uv, in float depth) { vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0)); vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0); posInCamera =posInCamera / posInCamera.w; return posInCamera; }vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){vec3 v01 = point -planeOrigin;float d = dot(planeNormal, v01) ;return (point - planeNormal * d);}float getDepth(in vec4 depth){float z_window = czm_unpackDepth(depth);z_window = czm_reverseLogDepth(z_window);float n_range = czm_depthRange.near;float f_range = czm_depthRange.far;return (2.0 * z_window - n_range - f_range) / (f_range - n_range);}void main(){gl_FragColor = texture2D(colorTexture, v_textureCoordinates);float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));vec4 viewPos = toEye(v_textureCoordinates, depth);vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);if(dis < u_radius){float f = 1.0 -abs(u_radius - dis) / u_radius;f = pow(f, 4.0);gl_FragColor = mix(gl_FragColor, u_scanColor, f);}}",l=r.Cartographic.toCartesian(t),s=new r.Cartesian4(l.x,l.y,l.z,1),c=new r.Cartographic(t.longitude,t.latitude,t.height+500),u=r.Cartographic.toCartesian(c),p=new r.Cartesian4(u.x,u.y,u.z,1),h=(new Date).getTime(),d=new r.Cartesian4,f=new r.Cartesian4,m=new r.Cartesian3,v=new r.PostProcessStage({fragmentShader:o,uniforms:{u_scanCenterEC:function(){return r.Matrix4.multiplyByVector(e.camera._viewMatrix,s,d)},u_scanPlaneNormalEC:function(){var t=r.Matrix4.multiplyByVector(e.camera._viewMatrix,s,d),n=r.Matrix4.multiplyByVector(e.camera._viewMatrix,p,f);return m.x=n.x-t.x,m.y=n.y-t.y,m.z=n.z-t.z,r.Cartesian3.normalize(m,m),m},u_radius:function(){return n*(((new Date).getTime()-h)%a)/a},u_scanColor:i}});return e.scene.postProcessStages.add(v),v}function l(e,t,n,i,a){var o="uniform sampler2D colorTexture;uniform sampler2D depthTexture;varying vec2 v_textureCoordinates;uniform vec4 u_scanCenterEC;uniform vec3 u_scanPlaneNormalEC;uniform vec3 u_scanLineNormalEC;uniform float u_radius;uniform vec4 u_scanColor;vec4 toEye(in vec2 uv, in float depth) { vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0)); vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0); posInCamera =posInCamera / posInCamera.w; return posInCamera; }bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt){vec3 v01 = testPt - ptOnLine;normalize(v01);vec3 temp = cross(v01, lineNormal);float d = dot(temp, u_scanPlaneNormalEC);return d > 0.5;}vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){vec3 v01 = point -planeOrigin;float d = dot(planeNormal, v01) ;return (point - planeNormal * d);}float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt){vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);return length(tempPt - ptOnLine);}float getDepth(in vec4 depth){float z_window = czm_unpackDepth(depth);z_window = czm_reverseLogDepth(z_window);float n_range = czm_depthRange.near;float f_range = czm_depthRange.far;return (2.0 * z_window - n_range - f_range) / (f_range - n_range);}void main(){gl_FragColor = texture2D(colorTexture, v_textureCoordinates);float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));vec4 viewPos = toEye(v_textureCoordinates, depth);vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);float twou_radius = u_radius * 2.0;if(dis < u_radius){float f0 = 1.0 -abs(u_radius - dis) / u_radius;f0 = pow(f0, 64.0);vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;float f = 0.0;if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz)){float dis1= length(prjOnPlane.xyz - lineEndPt);f = abs(twou_radius -dis1) / twou_radius;f = pow(f, 3.0);}gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);}}",l=r.Cartographic.toCartesian(t),s=new r.Cartesian4(l.x,l.y,l.z,1),c=new r.Cartographic(t.longitude,t.latitude,t.height+500),u=r.Cartographic.toCartesian(c),p=new r.Cartesian4(u.x,u.y,u.z,1),h=new r.Cartographic(t.longitude+r.Math.toRadians(.001),t.latitude,t.height),d=r.Cartographic.toCartesian(h),f=new r.Cartesian4(d.x,d.y,d.z,1),m=new r.Quaternion,v=new r.Matrix3,y=(new Date).getTime(),g=new r.Cartesian4,w=new r.Cartesian4,C=new r.Cartesian4,A=new r.Cartesian3,b=new r.Cartesian3,x=new r.PostProcessStage({fragmentShader:o,uniforms:{u_scanCenterEC:function(){return r.Matrix4.multiplyByVector(e.camera._viewMatrix,s,g)},u_scanPlaneNormalEC:function(){var t=r.Matrix4.multiplyByVector(e.camera._viewMatrix,s,g),n=r.Matrix4.multiplyByVector(e.camera._viewMatrix,p,w);return A.x=n.x-t.x,A.y=n.y-t.y,A.z=n.z-t.z,r.Cartesian3.normalize(A,A),A},u_radius:n,u_scanLineNormalEC:function(){var t=r.Matrix4.multiplyByVector(e.camera._viewMatrix,s,g),n=r.Matrix4.multiplyByVector(e.camera._viewMatrix,p,w),i=r.Matrix4.multiplyByVector(e.camera._viewMatrix,f,C);A.x=n.x-t.x,A.y=n.y-t.y,A.z=n.z-t.z,r.Cartesian3.normalize(A,A),b.x=i.x-t.x,b.y=i.y-t.y,b.z=i.z-t.z;var o=((new Date).getTime()-y)%a/a;return r.Quaternion.fromAxisAngle(A,o*r.Math.PI*2,m),r.Matrix3.fromQuaternion(m,v),r.Matrix3.multiplyByVector(v,b,b),r.Cartesian3.normalize(b,b),b},u_scanColor:i}});return e.scene.postProcessStages.add(x),x}function s(e){function t(e,t){this._definitionChanged=new r.Event,this._color=void 0,this._colorSubscription=void 0,this.color=e,this.duration=t,this._time=(new Date).getTime()}Object.defineProperties(t.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:r.createPropertyDescriptor("color")}),t.prototype.getType=function(e){return"PolylineTrailLink"},t.prototype.getValue=function(e,t){return r.defined(t)||(t={}),t.color=r.Property.getValueOrClonedDefault(this._color,e,r.Color.WHITE,t.color),t.image=r.Material.PolylineTrailLinkImage,t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t},t.prototype.equals=function(e){return this===e||e instanceof t&&Property.equals(this._color,e._color)},r.PolylineTrailLinkMaterialProperty=t,r.Material.PolylineTrailLinkType="PolylineTrailLink",r.Material.PolylineTrailLinkImage=e.flowImage,r.Material.PolylineTrailLinkSource="czm_material czm_getMaterial(czm_materialInput materialInput)\n                                                       {\n                                                            czm_material material = czm_getDefaultMaterial(materialInput);\n                                                            vec2 st = materialInput.st;\n                                                            vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                                                            material.alpha = colorImage.a * color.a;\n                                                            material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n                                                            return material;\n                                                        }",r.Material._materialCache.addMaterial(r.Material.PolylineTrailLinkType,{fabric:{type:r.Material.PolylineTrailLinkType,uniforms:{color:new r.Color(1,0,0,.5),image:r.Material.PolylineTrailLinkImage,time:0},source:r.Material.PolylineTrailLinkSource},translucent:function(e){return!0}})}function c(e,t){var n=e.height&&e.height>5e3?e.height:5e3,i=Math.abs(e.pt1.lon-e.pt2.lon)>Math.abs(e.pt1.lat-e.pt2.lat)?Math.abs(e.pt1.lon-e.pt2.lon):Math.abs(e.pt1.lat-e.pt2.lat),r=e.num&&e.num>50?e.num:50,a=[],o=i/r;if(Math.abs(e.pt1.lon-e.pt2.lon)>Math.abs(e.pt1.lat-e.pt2.lat)){var l=(e.pt2.lat-e.pt1.lat)/r;e.pt1.lon-e.pt2.lon>0&&(o=-o);for(var s=0;s<r;s++){var c=n-4*Math.pow(-.5*i+Math.abs(o)*s,2)*n/Math.pow(i,2),u=e.pt1.lon+o*s,p=e.pt1.lat+l*s;a.push([u,p,c])}}else{var h=(e.pt2.lon-e.pt1.lon)/r;e.pt1.lat-e.pt2.lat>0&&(o=-o);for(var d=0;d<r;d++){var f=n-4*Math.pow(-.5*i+Math.abs(o)*d,2)*n/Math.pow(i,2),m=e.pt1.lon+h*d,v=e.pt1.lat+o*d;a.push([m,v,f])}}return void 0!==t&&(t=a),a.push([e.pt2.lon,e.pt2.lat,e.pt2.height||0]),a}function u(e,t,n,i){for(var r=[],a=Math.PI/180*Math.round(360/i),o=0;o<i;o++){var l=t+e*Math.sin(a*o),s=n+e*Math.cos(a*o);r.unshift({x:l,y:s})}return r}function p(e,t,n){for(var i=n.observer[0],a=n.observer[1],o=n.observer[2],l=[],s=0;s<t.length;s++){var c=void 0;c=s===t.length-1?new r.PolygonHierarchy(r.Cartesian3.fromDegreesArrayHeights([i,a,o,t[s].x,t[s].y,0,t[0].x,t[0].y,0])):new r.PolygonHierarchy(r.Cartesian3.fromDegreesArrayHeights([i,a,o,t[s].x,t[s].y,0,t[s+1].x,t[s+1].y,0]));var u=e.entities.add({name:"三角形",polygon:{hierarchy:c,outline:!1,perPositionHeight:!0,material:n.material}});l.push(u)}return l}function h(e,t,n){var i,a,o,l,s,c,u=e.positionList,p=0,h=0;function d(t){i=u[t+1][0]-u[t][0],a=u[t+1][1]-u[t][1],o=i/e.number,l=a/e.number,h=0}d(p),t.polygon.hierarchy=new r.CallbackProperty((function(){return Math.abs(s)>=Math.abs(i)&&Math.abs(c)>=Math.abs(a)&&(p+=1,p===u.length-1&&(p=0),n[0]=n[0]+s,n[1]=n[1]+c,n[2]=n[2]+s,n[3]=n[3]+c,d(p)),s=h*o,c=h*l,h++,new r.PolygonHierarchy(r.Cartesian3.fromDegreesArrayHeights([e.observer[0],e.observer[1],e.observer[2],n[0]+s,n[1]+c,0,n[2]+s,n[3]+c,0]))}),!1)}a.prototype.autoRotate=function(e){var t=Date.now(),n=this.viewer;function i(){var e=Date.now(),i=(e-t)/1e3;t=e,n.scene.camera.rotate(r.Cartesian3.UNIT_Z,-.1*i)}n.clock.onTick.addEventListener(i),n.camera.changed.addEventListener((function(){var t=Math.ceil(n.camera.positionCartographic.height);t<e?n.clock.onTick.removeEventListener(i):n.clock.onTick.addEventListener(i)}))},a.prototype.addCircleScan=function(e){this.viewer.scene.globe.depthTestAgainstTerrain=!0;var t=new r.Cartographic(r.Math.toRadians(e.lon),r.Math.toRadians(e.lat),0);return o(this.viewer,t,e.r,e.scanColor,e.interval)},a.prototype.delCircleScan=function(e){this.viewer.scene.globe.depthTestAgainstTerrain=!1,this.viewer.scene.postProcessStages.remove(e)},a.prototype.addRadarScan=function(e){this.viewer.scene.globe.depthTestAgainstTerrain=!0;var t=new r.Cartographic(r.Math.toRadians(e.lon),r.Math.toRadians(e.lat),0);return l(this.viewer,t,e.r,e.scanColor,e.interval)},a.prototype.delRadarScan=function(e){this.viewer.scene.globe.depthTestAgainstTerrain=!1,this.viewer.scene.postProcessStages.remove(e)},a.prototype.addDoubleCircleRipple=function(e){var t=e.minR,n=e.minR,i=this.viewer;function a(){return t+=e.deviationR,t>=e.maxR&&(t=e.minR),t}function o(){return n+=e.deviationR,n>=e.maxR&&(n=e.minR),n}i.entities.add({name:"",id:e.id[0],position:r.Cartesian3.fromDegrees(e.lon,e.lat,e.height),ellipse:{semiMinorAxis:new r.CallbackProperty(a,!1),semiMajorAxis:new r.CallbackProperty(a,!1),height:e.height,material:new r.ImageMaterialProperty({image:e.imageUrl,repeat:new r.Cartesian2(1,1),transparent:!0,color:new r.CallbackProperty((function(){return r.Color.WHITE.withAlpha(1-t/e.maxR)}),!1)})}}),setTimeout((function(){i.entities.add({name:"",id:e.id[1],position:r.Cartesian3.fromDegrees(e.lon,e.lat,e.height),ellipse:{semiMinorAxis:new r.CallbackProperty(o,!1),semiMajorAxis:new r.CallbackProperty(o,!1),height:e.height,material:new r.ImageMaterialProperty({image:e.imageUrl,repeat:new r.Cartesian2(1,1),transparent:!0,color:new r.CallbackProperty((function(){return r.Color.WHITE.withAlpha(1-t/e.maxR)}),!1)})}})}),e.eachInterval)},a.prototype.addPolyline=function(e){e.flowing&&(s(e),e.options.polyline.material=new r.PolylineTrailLinkMaterialProperty(e.options.polyline.material,e.options.polyline.interval)),this.viewer.entities.add(e.options)},a.prototype.addParabola=function(e){var t=e.center,n=e.points;e.flowing&&(s(e),e.options.polyline.material=new r.PolylineTrailLinkMaterialProperty(e.options.polyline.material,e.options.polyline.interval));for(var i=0;i<n.length;i++){for(var a=c({pt1:t,pt2:n[i],height:e.height,num:100}),o=[],l=0;l<a.length;l++)o.push(a[l][0],a[l][1],a[l][2]);e.options.polyline.positions=r.Cartesian3.fromDegreesArrayHeights(o),this.viewer.entities.add(e.options)}},a.prototype.addWall=function(e){e.flowing&&(s(e),e.options.wall.material=new r.PolylineTrailLinkMaterialProperty(e.options.wall.material,e.options.wall.interval)),this.viewer.entities.add(e.options)},a.prototype.addFlyLinesAndPoints=function(e,t){var n=this.viewer;n.scene.globe.depthTestAgainstTerrain=!1,n.cesiumWidget.screenSpaceEventHandler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.addParabola(e);var i=e.center,a=e.points;n.entities.add({id:i.id,position:r.Cartesian3.fromDegrees(i.lon,i.lat,0),point:{pixelSize:i.size,color:i.color}});for(var o=0;o<a.length;o++)n.entities.add({id:a[o].id,position:r.Cartesian3.fromDegrees(a[o].lon,a[o].lat,1),point:{pixelSize:a[o].size,color:a[o].color}});this.handleEvent("LEFT_CLICK",t)},a.prototype.handleEvent=function(e,t){if(t&&"function"===typeof t){var n=this.viewer;new r.ScreenSpaceEventHandler(n.scene.canvas).setInputAction((function(e){var i=n.scene.pick(e.position);r.defined(i)&&"yscNoNeedEntity"!==i.id._name&&t(i.id._id)}),r.ScreenSpaceEventType[e])}},a.prototype.addFlyLinesByCZML=function(e){var t=this.viewer;t.shouldAnimate=!0;for(var n=e.center,i=e.points,a=[],o=0;o<i.length;o++){for(var l=[{id:"document",name:"CZML Path",version:"1.0",clock:{interval:"2019-05-27T10:00:00Z/2019-05-27T10:16:50Z",currentTime:"2019-05-27T10:00:00Z",multiplier:e.multiplier}},{id:"path",name:"path with GPS flight data",description:"<p>Hang gliding flight log data from Daniel H. Friedman.<br>Icon created by Larisa Skosyrska from the Noun Project</p>",availability:"2019-05-27T10:00:00Z/2019-05-27T10:16:50Z",path:{material:{polylineOutline:{color:{rgba:e.lineColor},outlineColor:{rgba:[0,0,0,0]},outlineWidth:0}},width:2,leadTime:990,trailTime:990,resolution:5},billboard:{image:e.image,scale:.5,eyeOffset:{cartesian:[0,0,-10]}},position:{epoch:"2019-05-27T10:00:00Z",cartographicDegrees:[]}}],s=c({pt1:n,pt2:i[o],height:e.height,num:100}),u=[],p=0;p<s.length;p++)u.push(10*p,s[p][0],s[p][1],s[p][2]);l[1].position.cartographicDegrees=u,i[o].image&&(l[1].billboard.image=i[o].image),t.dataSources.add(r.CzmlDataSource.load(l)).then((function(e){a.push(e)}))}return a},a.prototype.Css3Renderer=function(e,t,n){var i=new r.Cartesian2,a=e.viewer.scene,o=e.viewer.camera,l=this;l.app=e,l.container=null,l.elements=t,l.isBackHide=n,this.__proto__.init=function(){var e=document.createElement("div");e.className="ys-css3-container",document.body.appendChild(e),l.container=e,l.elements.forEach((function(t){e.insertAdjacentHTML("beforeend",t.element)})),a.preRender.addEventListener((function(){for(var t=0;t<e.children.length;t++){var n=r.Cartesian3.fromDegrees(l.elements[t].position[0],l.elements[t].position[1],l.elements[t].position[2]||0),s=a.cartesianToCanvasCoordinates(n,i);if(r.defined(s)&&(e.children[t].style.left=parseFloat(s.x)+parseFloat(l.elements[t].offset[0])+"px",e.children[t].style.top=parseFloat(s.y)+parseFloat(l.elements[t].offset[1])+"px",l.isBackHide)){var c=o.position,u=a.globe.ellipsoid.cartesianToCartographic(c).height;u+=1*a.globe.ellipsoid.maximumRadius,r.Cartesian3.distance(c,n)>u?e.children[t].style.display="none":e.children[t].style.display="block"}}}))},this.__proto__.remove=function(e){l.elements=l.elements.filter((function(t){return t.id!==e})),l.container.removeChild(document.getElementById(e))},this.__proto__.append=function(e){l.elements.push(e),l.container.insertAdjacentHTML("beforeend",e.element)},this.__proto__.removeEntityLayer=function(e){l.app.viewer.entities.removeById(e+"_1"),l.app.viewer.entities.removeById(e+"_2"),l.app.viewer.entities.removeById(e+"_3"),l.remove(e)},this.__proto__.addEntityLayer=function(e){var t=e.position[0],n=e.position[1],i=!1,a=this,o=.001,l=o,s=o,c=o;setTimeout((function(){return i=!0}),300);var u=r.Math.toRadians(30),p=r.Math.toRadians(30),h=e.boxHeight,d=e.boxHeightMax,f=e.boxHeightDif,m=!0;a.app.viewer.entities.add({id:e.id+"_1",name:"立方体盒子",position:new r.CallbackProperty((function(){return h+=f,h>=d&&(h=d),r.Cartesian3.fromDegrees(t,n,h/2)}),!1),box:{dimensions:new r.CallbackProperty((function(){return h+=f,h>=d&&(h=d,m&&(m=!1,a.append(e,!0))),new r.Cartesian3(e.boxSide,e.boxSide,h)}),!1),material:e.boxMaterial}}),viewer.entities.add({id:e.id+"_2",name:"椭圆",position:r.Cartesian3.fromDegrees(t,n),ellipse:{semiMinorAxis:new r.CallbackProperty((function(){return i&&(o+=e.circleSize/20,o>=e.circleSize&&(o=e.circleSize)),o}),!1),semiMajorAxis:new r.CallbackProperty((function(){return i&&(l+=e.circleSize/20,l>=e.circleSize&&(l=e.circleSize)),l}),!1),material:"images/circle2.png",rotation:new r.CallbackProperty((function(){return u+=.05,u}),!1),stRotation:new r.CallbackProperty((function(){return u+=.05,u}),!1),zIndex:2}}),viewer.entities.add({id:e.id+"_3",name:"椭圆",position:r.Cartesian3.fromDegrees(t,n),ellipse:{semiMinorAxis:new r.CallbackProperty((function(){return i&&(s+=e.circleSize/20,s>=e.circleSize/2&&(s=e.circleSize/2)),s}),!1),semiMajorAxis:new r.CallbackProperty((function(){return i&&(c+=e.circleSize/20,c>=e.circleSize/2&&(c=e.circleSize/2)),c}),!1),material:"images/circle1.png",rotation:new r.CallbackProperty((function(){return p-=.03,p}),!1),stRotation:new r.CallbackProperty((function(){return p-=.03,p}),!1),zIndex:3}})},this.init()},a.prototype.addLightScan=function(e){for(var t=u(e.circle[0],e.circle[1],e.circle[2],e.circle[3]),n=p(this.viewer,t,e),i=0;i<n.length;i++)i!==n.length-1?h(e,n[i],[t[i].x,t[i].y,t[i+1].x,t[i+1].y]):h(e,n[i],[t[i].x,t[i].y,t[0].x,t[0].y]);return n},a.prototype.addLightScanFollowEntity=function(e,t){var n=u(e.circle[0],e.circle[1],e.circle[2],e.circle[3]),i=p(this.viewer,n,e);function a(t,n,i,a){t.polygon.hierarchy=new r.CallbackProperty((function(){return new r.PolygonHierarchy(r.Cartesian3.fromDegreesArrayHeights([e.observer[0],e.observer[1],e.observer[2],n[0]+i,n[1]+a,0,n[2]+i,n[3]+a,0]))}),!1)}return this.viewer.scene.postRender.addEventListener((function(){var o=t.position.getValue(viewer.clock.currentTime);if(o)for(var l=viewer.scene.globe.ellipsoid,s=l.cartesianToCartographic(o),c=r.Math.toDegrees(s.longitude),u=r.Math.toDegrees(s.latitude),p=c-e.circle[1],h=u-e.circle[2],d=0;d<i.length;d++)d===i.length-1?a(i[d],[n[d].x,n[d].y,n[0].x,n[0].y],p,h):a(i[d],[n[d].x,n[d].y,n[d+1].x,n[d+1].y],p,h)})),i},a.prototype.combineEcharts=function(e){function t(e,t){this._mapContainer=e,this._overlay=this._createChartOverlay(),this._overlay.setOption(t)}(function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===Object(i["a"])(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!==typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)})([function(e,t,n){e.exports=n(1)},function(e,t,n){echarts?n(2).load():console.error("missing echarts lib")},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._viewer=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=n}var t,n,a;return t=e,a=[{key:"create",value:function(t,n){var i;t.eachComponent("GLMap",(function(t){(i=new e(echarts.cesiumViewer,n)).setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=i})),t.eachSeries((function(e){"GLMap"===e.get("coordinateSystem")&&(e.coordinateSystem=i)}))}},{key:"dimensions",get:function(){return["lng","lat"]}}],(n=[{key:"setMapOffset",value:function(e){return this._mapOffset=e,this}},{key:"getViewer",value:function(){return this._viewer}},{key:"dataToPoint",value:function(e){var t=this._viewer.scene,n=[0,0],i=r.Cartesian3.fromDegrees(e[0],e[1]);if(!i)return n;if(t.mode===r.SceneMode.SCENE3D&&r.Cartesian3.angleBetween(t.camera.position,i)>r.Math.toRadians(80))return!1;var a=t.cartesianToCanvasCoordinates(i);return a?[a.x-this._mapOffset[0],a.y-this._mapOffset[1]]:n}},{key:"pointToData",value:function(e){var t=this._mapOffset,n=viewer.scene.globe.ellipsoid,i=new r.cartesian3(e[1]+t,e[2]+t[2],0),a=n.cartesianToCartographic(i);return[a.lng,a.lat]}},{key:"getViewRect",value:function(){var e=this._api;return new echarts.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())}},{key:"getRoamTransform",value:function(){return echarts.matrix.create()}}])&&i(t.prototype,n),a&&i(t,a),e}();function o(){echarts.registerCoordinateSystem("GLMap",a),echarts.registerAction({type:"GLMapRoam",event:"GLMapRoam",update:"updateLayout"},(function(e,t){}))}echarts.extendComponentModel({type:"GLMap",getViewer:function(){return echarts.cesiumViewer},defaultOption:{roam:!1}}),echarts.extendComponentView({type:"GLMap",init:function(e,t){this.api=t,echarts.cesiumViewer.scene.postRender.addEventListener(this.moveHandler,this)},moveHandler:function(e,t){this.api.dispatchAction({type:"GLMapRoam"})},render:function(e,t,n){},dispose:function(e){echarts.cesiumViewer.scene.postRender.removeEventListener(this.moveHandler,this)}}),n.d(t,"load",(function(){return o}))}]),echarts.cesiumViewer=this.viewer,t.prototype._createChartOverlay=function(){var e=this._mapContainer.scene;e.canvas.setAttribute("tabIndex",0);var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.width=e.canvas.width+"px",t.style.height=e.canvas.height+"px",t.style.pointerEvents="none";var n=document.getElementsByClassName("echartMap").length;return t.setAttribute("id","ysCesium-echarts-"+parseInt(99999*Math.random())+"-"+n),t.setAttribute("class","echartMap"),this._mapContainer.container.appendChild(t),this._echartsContainer=t,echarts.init(t)},t.prototype.dispose=function(){this._echartsContainer&&(this._mapContainer.container.removeChild(this._echartsContainer),this._echartsContainer=null),this._overlay&&(this._overlay.dispose(),this._overlay=null)},t.prototype.updateOverlay=function(e){this._overlay&&this._overlay.setOption(e)},t.prototype.getMap=function(){return this._mapContainer},t.prototype.getOverlay=function(){return this._overlay},t.prototype.show=function(){document.getElementById(this._id).style.visibility="visible"},t.prototype.hide=function(){document.getElementById(this._id).style.visibility="hidden"},new t(this.viewer,e)},t["a"]=a},"8a81":function(e,t,n){"use strict";var i=n("7726"),r=n("69a8"),a=n("9e1e"),o=n("5ca1"),l=n("2aba"),s=n("67ab").KEY,c=n("79e5"),u=n("5537"),p=n("7f20"),h=n("ca5a"),d=n("2b4c"),f=n("37c8"),m=n("3a72"),v=n("d4c0"),y=n("1169"),g=n("cb7c"),w=n("d3f4"),C=n("4bf8"),A=n("6821"),b=n("6a99"),x=n("4630"),_=n("2aeb"),P=n("7bbc"),M=n("11e9"),S=n("2621"),k=n("86cc"),T=n("0d58"),O=M.f,z=k.f,L=P.f,E=i.Symbol,D=i.JSON,I=D&&D.stringify,R="prototype",j=d("_hidden"),H=d("toPrimitive"),N={}.propertyIsEnumerable,B=u("symbol-registry"),V=u("symbols"),F=u("op-symbols"),U=Object[R],G="function"==typeof E&&!!S.f,W=i.QObject,X=!W||!W[R]||!W[R].findChild,q=a&&c((function(){return 7!=_(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=O(U,t);i&&delete U[t],z(e,t,n),i&&e!==U&&z(U,t,i)}:z,J=function(e){var t=V[e]=_(E[R]);return t._k=e,t},Z=G&&"symbol"==typeof E.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof E},K=function(e,t,n){return e===U&&K(F,t,n),g(e),t=b(t,!0),g(n),r(V,t)?(n.enumerable?(r(e,j)&&e[j][t]&&(e[j][t]=!1),n=_(n,{enumerable:x(0,!1)})):(r(e,j)||z(e,j,x(1,{})),e[j][t]=!0),q(e,t,n)):z(e,t,n)},Q=function(e,t){g(e);var n,i=v(t=A(t)),r=0,a=i.length;while(a>r)K(e,n=i[r++],t[n]);return e},Y=function(e,t){return void 0===t?_(e):Q(_(e),t)},$=function(e){var t=N.call(this,e=b(e,!0));return!(this===U&&r(V,e)&&!r(F,e))&&(!(t||!r(this,e)||!r(V,e)||r(this,j)&&this[j][e])||t)},ee=function(e,t){if(e=A(e),t=b(t,!0),e!==U||!r(V,t)||r(F,t)){var n=O(e,t);return!n||!r(V,t)||r(e,j)&&e[j][t]||(n.enumerable=!0),n}},te=function(e){var t,n=L(A(e)),i=[],a=0;while(n.length>a)r(V,t=n[a++])||t==j||t==s||i.push(t);return i},ne=function(e){var t,n=e===U,i=L(n?F:A(e)),a=[],o=0;while(i.length>o)!r(V,t=i[o++])||n&&!r(U,t)||a.push(V[t]);return a};G||(E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(F,n),r(this,j)&&r(this[j],e)&&(this[j][e]=!1),q(this,e,x(1,n))};return a&&X&&q(U,e,{configurable:!0,set:t}),J(e)},l(E[R],"toString",(function(){return this._k})),M.f=ee,k.f=K,n("9093").f=P.f=te,n("52a7").f=$,S.f=ne,a&&!n("2d00")&&l(U,"propertyIsEnumerable",$,!0),f.f=function(e){return J(d(e))}),o(o.G+o.W+o.F*!G,{Symbol:E});for(var ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ie.length>re;)d(ie[re++]);for(var ae=T(d.store),oe=0;ae.length>oe;)m(ae[oe++]);o(o.S+o.F*!G,"Symbol",{for:function(e){return r(B,e+="")?B[e]:B[e]=E(e)},keyFor:function(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),o(o.S+o.F*!G,"Object",{create:Y,defineProperty:K,defineProperties:Q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var le=c((function(){S.f(1)}));o(o.S+o.F*le,"Object",{getOwnPropertySymbols:function(e){return S.f(C(e))}}),D&&o(o.S+o.F*(!G||c((function(){var e=E();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))}))),"JSON",{stringify:function(e){var t,n,i=[e],r=1;while(arguments.length>r)i.push(arguments[r++]);if(n=t=i[1],(w(t)||void 0!==e)&&!Z(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Z(t))return t}),i[1]=t,I.apply(D,i)}}),E[R][H]||n("32e9")(E[R],H,E[R].valueOf),p(E,"Symbol"),p(Math,"Math",!0),p(i.JSON,"JSON",!0)},ac4d:function(e,t,n){n("3a72")("asyncIterator")},ad00:function(e,t,n){e.exports=n.p+"static/img/color2.ce4f2970.png"},bee2:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return r}))},d4c0:function(e,t,n){var i=n("0d58"),r=n("2621"),a=n("52a7");e.exports=function(e){var t=i(e),n=r.f;if(n){var o,l=n(e),s=a.f,c=0;while(l.length>c)s.call(e,o=l[c++])&&t.push(o)}return t}},d4ec:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return i}))},ec55:function(e,t){e.exports="data:image/png;base64,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"}}]);