(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cec0af2"],{"0ca5":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var o=r("5a89"),n=function(e){o["H"].call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};n.prototype=Object.assign(Object.create(o["H"].prototype),{constructor:n,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,r,n){var a=new o["o"](this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{var r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(n)},r,n)},decodeDracoFile:function(e,t,r,o){var n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,n).then(t)},decodeGeometry:function(e,t){for(var r in t.attributeTypes){var o=t.attributeTypes[r];void 0!==o.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=o.name)}var a,s=JSON.stringify(t);if(n.taskCache.has(e)){var i=n.taskCache.get(e);if(i.key===s)return i.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var d=this.workerNextTaskID++,c=e.byteLength,u=this._getWorker(d,c).then(r=>(a=r,new Promise((r,o)=>{a._callbacks[d]={resolve:r,reject:o},a.postMessage({type:"decode",id:d,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return u.catch(()=>!0).then(()=>{a&&d&&this._releaseTask(a,d)}),n.taskCache.set(e,{key:s,promise:u}),u},_createGeometry:function(e){var t=new o["g"];e.index&&t.setIndex(new o["f"](e.index.array,1));for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r],a=n.name,s=n.array,i=n.itemSize;t.setAttribute(a,new o["f"](s,i))}return t},_loadLibrary:function(e,t){var r=new o["o"](this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((t,o)=>{r.load(e,t,void 0,o)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var o=n.DRACOWorker.toString(),a=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),n.DRACOWorker=function(){var e,t;function r(e,t,r,a){var s,i,d=a.attributeIDs,c=a.attributeTypes,u=t.GetEncodedGeometryType(r);if(u===e.TRIANGULAR_MESH)s=new e.Mesh,i=t.DecodeBufferToMesh(r,s);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,i=t.DecodeBufferToPointCloud(r,s)}if(!i.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+i.error_msg());var h={index:null,attributes:[]};for(var l in d){var f,m,y=self[c[l]];if(a.useUniqueIDs)m=d[l],f=t.GetAttributeByUniqueId(s,m);else{if(m=t.GetAttributeId(s,e[d[l]]),-1===m)continue;f=t.GetAttribute(s,m)}h.attributes.push(n(e,t,s,l,y,f))}return u===e.TRIANGULAR_MESH&&(h.index=o(e,t,s)),e.destroy(s),h}function o(e,t,r){var o=r.num_faces(),n=3*o,a=4*n,s=e._malloc(a);t.GetTrianglesUInt32Array(r,a,s);var i=new Uint32Array(e.HEAPF32.buffer,s,n).slice();return e._free(s),{array:i,itemSize:1}}function n(e,t,r,o,n,s){var i=s.num_components(),d=r.num_points(),c=d*i,u=c*n.BYTES_PER_ELEMENT,h=a(e,n),l=e._malloc(u);t.GetAttributeDataArrayForAllPoints(r,s,h,u,l);var f=new n(e.HEAPF32.buffer,l,c).slice();return e._free(l),{name:o,array:f,itemSize:i}}function a(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}onmessage=function(o){var n=o.data;switch(n.type){case"init":e=n.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=n.buffer,s=n.taskConfig;t.then(e=>{var t=e.draco,o=new t.Decoder,i=new t.DecoderBuffer;i.Init(new Int8Array(a),a.byteLength);try{var d=r(t,o,i,s),c=d.attributes.map(e=>e.array.buffer);d.index&&c.push(d.index.array.buffer),self.postMessage({type:"decode",id:n.id,geometry:d},c)}catch(u){console.error(u),self.postMessage({type:"error",id:n.id,error:u.message})}finally{t.destroy(i),t.destroy(o)}});break}}},n.taskCache=new WeakMap,n.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},n.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},n.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},n.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},"5f6e":function(e,t,r){},7107:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("section",{attrs:{id:"container"}})])}],a=r("5a89"),s=r("34ad"),i=r("4721"),d=r("0ca5"),c={name:"Index",data:function(){return{camera:null,scene:null,renderer:null,mesh:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=document.getElementById("container");this.camera=new a["ab"](45,e.clientWidth/e.clientHeight,.1,1e4),this.renderer=new a["Ab"]({antialias:!0}),this.camera.position.set(200,200,400),this.scene=new a["lb"],this.renderer.setClearColor(new a["j"](16249585)),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.shadowMap.enabled=!0,e.appendChild(this.renderer.domElement),this.controls=new i["a"](this.camera,this.renderer.domElement),this.controls.target=new a["yb"](0,0,0),this.loadLight(),this.load3D()},load3D:function(){var e=this,t=new s["a"],r=new d["a"];r.setDecoderPath("/draco/"),r.preload(),t.setDRACOLoader(r),t.load("/3D/city.glb",(function(t){e.scene.add(t.scene),e.renderer.render(e.scene,e.camera)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.error(e)}))},loadLight:function(){var e=new a["a"](16777215);this.scene.add(e)},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)}}},u=c,h=(r("afc5"),r("2877")),l=Object(h["a"])(u,o,n,!1,null,"4ac512ce",null);t["default"]=l.exports},afc5:function(e,t,r){"use strict";r("5f6e")}}]);