(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-140c0d6b"],{"42d5":function(e,t,a){},"9e7a":function(e,t,a){"use strict";a("42d5")},c055:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"map",attrs:{id:"map"}})},s=[],i=a("ce5d"),l={name:"Index",data:function(){return{map:null}},mounted:function(){var e=this;this.map=new i["a"],setTimeout((function(){e.map.initMap("map");for(var t=[],a=0;a<2e3;a++)t[a]={lng:112.6+Math.random(),lat:27.6+Math.random()};e.map.addCluster(t,{callback:function(){e.map.clearAllFeatures()}})}),1e3)}},n=l,o=(a("9e7a"),a("2877")),c=Object(o["a"])(n,r,s,!1,null,"6d740600",null);t["default"]=c.exports},ce5d:function(e,t,a){"use strict";a("6b54"),a("8449"),a("6762"),a("2fdb"),a("ac6a");var r=a("5530"),s=(a("96cf"),a("1da1")),i=(a("c5f6"),a("d4ec")),l=a("bee2"),n=(a("5bc0"),a("480c")),o=a("2ef1"),c=a("21bc"),u=a("3e6b"),y=a("5831"),h=a("55bd"),p=a("c810"),g=a("6792"),f=a("f2f0"),d=a("5eee"),m=a("a2c7"),v=a("4cdf"),b=a("f403"),w=a("5bc33"),F=a("83a6"),k=a("6c77"),O=a("ce2c"),S=a("6cbf"),x=a("8295"),T=a("8682"),_=a("0710"),C=a("4787"),L=a("ca42"),E=a("c276"),z=a("1157"),j=a.n(z),N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i["a"])(this,e),this.map=void 0,this.layers={},this.features={},this.lastFeature=null,this.resolution=[1.406250026231578,.703125013115789,.3515625065578945,.17578125327894775,.08789062663947399,.043945313319736994,.021972656659868472,.010986328329934226,.005493164164967124,.0027465820824835504,.0013732910412417797,.0006866455206208899,.0003433227603104438,.0001716613801552224,8583069007761132e-20,4291534503880566e-20,21457672519402802e-21,10728836259701401e-21,5364418129850712e-21,2682209064925356e-21,1341104532462678e-21],this.sldt="http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",this.slbz="http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i345013117!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0",this.yxdt="http://172.22.137.81:6080/arcgis/rest/services/mapsq/sq_yxdt/MapServer",this.yxbz="http://172.22.137.81:6080/arcgis/rest/services/mapsq/sq_yxzj/MapServer",this.clickCallback=null,this.partCallback=null,this.overlayFeature={},this.partLayer=null,this.partTmpWms=null,this.minZoom=t.minZoom||10,this.maxZoom=t.maxZoom||18,this.zoom=t.zoom||13,this.center=t.center||[112.993066,28.186488]}return Object(l["a"])(e,[{key:"initMap",value:function(e){var t=this;this.layers["sldt"]=new n["a"]({source:new o["a"]({url:this.sldt}),zIndex:0}),this.map=new d["a"]({target:e,layers:[this.layers["sldt"]],view:new m["a"]({projection:"EPSG:4326",center:this.center||[112.993066,28.186488],zoom:this.zoom,maxZoom:this.maxZoom,minZoom:this.minZoom}),controls:Object(c["a"])({zoom:!1,rotate:!1,attribution:!1})}),this.map.on("pointermove",(function(e){var a=t.map.getEventPixel(e.originalEvent),r=t.map.forEachFeatureAtPixel(a,(function(e){return e}));void 0===r||!r.get("features")&&!r.get("clickFlag")||r.get("features")&&1===!r.get("features").length?t.map.getTargetElement().style.cursor="auto":t.map.getTargetElement().style.cursor="pointer"})),this.map.on("singleclick",(function(e){t.clearAllOverlay();var a=t.map.getEventPixel(e.originalEvent),r=t.map.forEachFeatureAtPixel(a,(function(e){return e}));if(void 0!==r&&(r.get("clickFlag")||r.get("features")[0].get("clickFlag")&&1===r.get("features").length)){r.get("features")&&r.get("features").length&&(r=r.get("features")[0]);var s=r.get("type"),i=r.get("data"),l=r.get("option");if(t.lastFeature){var n=t.lastFeature.get("option"),o=t.lastFeature.get("data");t.lastFeature.setStyle(t.getDefaultStyle(n.styleType,n,o)),t.lastFeature=r}else t.lastFeature=r;l&&l.chosedOption&&r.setStyle(t.getDefaultStyle(l.chosedOption.styleType||l.styleType,l.chosedOption,i)),l.fitView&&(i.position||i.lng||i.lat)&&t.setViewCenter(i.position||[Number(i.lng),Number(i.lat)]),l.callback&&l.callback(s,i,r),t.clickCallback&&t.clickCallback(s,i)}else t.partCallback&&t.partCallback(e)}))}},{key:"addPartImageLayerByCode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.clearPartImageLayer();var a=new g["a"]({params:{LAYERS:"sums_440300_basic_grid_v20:wh_sys",FORMAT:"image/png",CQL_FILTER:'"properties.type"=\''.concat(e,"'"),STYLES:"sums_321300_basic_grid_v20:".concat(e)},serverType:"geoserver",url:"https://mis.sqszhcg.com/api/geoServerApi/geoserver/sums_321300_basic_grid_v20/wms"});this.partLayer=new p["a"]({source:a}),this.map.addLayer(this.partLayer)}},{key:"clearPartImageLayer",value:function(){this.partLayer&&this.map.removeLayer(this.partLayer)}},{key:"searchPartInfoByCoordinate",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.length&&a){e.next=2;break}return e.abrupt("return",null);case 2:return r="contains(geometry,point(".concat(t[0]," ").concat(t[1],')) or "properties.type"=\'').concat(a,"'"),this.partTmpWms=new f["a"]({url:null,serverType:"geoserver",crossOrigin:"anonymous",params:{FORMAT:"JSON",VERSION:"1.3.0",QUERY_LAYERS:"sums_321300_basic_grid_v20:wh_sys",LAYERS:"sums_321300_basic_grid_v20:wh_sys",TRANSPARENT:!0,CQL_FILTER:r}}),s=this.partTmpWms.getFeatureInfoUrl(t,this.map.getView().getResolution(),this.map.getView().getProjection(),{INFO_FORMAT:"application/json",FEATURE_COUNT:50}),e.next=7,j.a.get(s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"changeDefalutLayersVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sl";"sl"===e?(this.layers["sldt"].setVisible(!0),this.layers["slbz"].setVisible(!0),this.layers["yxdt"].setVisible(!1),this.layers["yxbz"].setVisible(!1)):"yx"===e&&(this.layers["sldt"].setVisible(!1),this.layers["slbz"].setVisible(!1),this.layers["yxdt"].setVisible(!0),this.layers["yxbz"].setVisible(!0))}},{key:"addLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";void 0===this.layers[e]&&(this.layers[e]=new u["a"]({source:new y["a"]}),this.map.addLayer(this.layers[e]))}},{key:"initOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={type:"default",stopEvent:!1,offset:[0,0],positioning:"bottom-center"},s=Object.assign(Object(r["a"])({},a),t);this.overlayFeature[s.type]=new _["a"]({positioning:s.positioning,element:e,offset:s.offset,stopEvent:s.stopEvent}),this.map.addOverlay(this.overlayFeature[s.type])}},{key:"highLighFeature",value:function(e,t,a){var r=this,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.layers[e].getSource().getFeatures().forEach((function(e){var i=e.get("data"),l=e.get("option");if(i[a]===t[a]){if(r.lastFeature){var n=r.lastFeature.get("option"),o=r.lastFeature.get("data");r.lastFeature.setStyle(r.getDefaultStyle(n.styleType,n,o)),r.lastFeature=e}else r.lastFeature=e;l.chosedOption&&e.setStyle(r.getDefaultStyle(l.chosedOption.styleType||l.styleType,l.chosedOption,t)),s&&(i.position||i.lng||i.lat)&&r.setViewCenter(i.position||[Number(i.lng),Number(i.lat)])}}))}},{key:"setViewCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e&&2===e.length&&"number"===typeof e[0]&&"number"===typeof e[1]&&(Number(e[0])<-180||Number(e[0])>180||Number(e[1])<-90||Number(e[1])>90||this.map.getView().animate({center:e,duration:t,easing:L["b"]}))}},{key:"setOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this.overlayFeature[t].setPosition(e)}},{key:"clearAllOverlay",value:function(){this.map.getOverlays().clear(),this.overlayFeature={}}},{key:"clearOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.map.removeOverlay(this.overlayFeature[e])}},{key:"addNormalFeatures",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={type:"default",textTarget:"",styleType:"point",otherStyle:null,chosedOption:null,clickFlag:!0,clearFlag:!0,fitView:!0},i=Object.assign(Object(r["a"])({},s),a);this.features[i.type]||(this.features[i.type]=[]),this.addLayers(i.type),i.clearFlag&&this.clearNormalFeatures(i.type),e.forEach((function(e){if(e.position||e.lng&&e.lat){var a=new v["a"]({geometry:new b["a"](e.position||[Number(e.lng),Number(e.lat)]),data:e,type:i.type,clickFlag:i.clickFlag,chosedOption:i.chosedOption,option:i});a.setStyle(i.otherStyle||t.getDefaultStyle(i.styleType,i,e)),t.features[i.type].push(a)}})),this.layers[i.type].getSource().addFeatures(this.features[i.type])}},{key:"clearNormalFeatures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.layers[e]&&(this.layers[e].getSource().clear(),this.features[e]=[])}},{key:"clearAllFeatures",value:function(){for(var e in this.layers)["sldt","slbz","yxdt","yxbz"].includes(e)||this.layers[e].getSource().clear();for(var t in this.features)this.features[t]=[],delete this.features[t]}},{key:"addPolygonFeatures",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={type:"defaultPolygon",clickFlag:!0,clearFlag:!0},i=Object.assign(Object(r["a"])({},s),a);this.features[i.type]||(this.features[i.type]=[]),this.addLayers(i.type),i.clearFlag&&this.clearFeaturesByLayerType(i.type),this.features[i.type]=[],e.forEach((function(e){var a={styleType:"polygon",type:i.type,dataTarget:"path",width:3,strokeColor:[41,91,170,.8],fillColor:[76,172,166,.6],selectOption:{width:3,strokeColor:[41,91,170,.4],fillColor:[76,172,166,.3]},chosedOption:{width:3,strokeColor:[41,91,170,.4],fillColor:[76,172,166,.3]}},s=Object.assign(Object(r["a"])({},a),e.option),l=new v["a"]({type:"polygon",geometry:new w["a"](e[i.dataTarget]||e.path),data:e,option:s,selectOption:s.selectOption,chosedOption:s.chosedOption,clickFlag:i.clickFlag});l.setStyle(t.getDefaultStyle(s.styleType,s)),t.features[i.type].push(l)})),this.layers[i.type].getSource().addFeatures(this.features[i.type])}},{key:"clearFeaturesByLayerType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.layers[e]&&(this.layers[e].getSource().clear(),this.features[e]=[])}},{key:"getDefaultStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"point",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s={color:"rgba(0,255,255,1)",text:"",img:null},i=Object.assign(Object(r["a"])({},s),t);if("point"===e){var l=new F["a"]({color:i.color});return new k["b"]({image:new O["a"]({fill:l,radius:E["a"].fontSize(.1)}),fill:l})}if("icon"===e)return new k["b"]({image:new S["a"]({src:i.img,anchor:i.anchor||[.5,1],scale:i.scale||E["a"].fontSize(.7)/100})});if("iconText"===e)return a[i.textTarget]=String(a[i.textTarget]),new k["b"]({image:new S["a"]({src:i.img,anchor:[.5,.5],scale:E["a"].fontSize(.7)/100}),text:new x["a"]({text:a[i.textTarget]+""||"文本",textAlign:"center",font:".16rem SimHei",offsetX:0,offsetY:30,fill:new F["a"]({color:"#FFF"}),stroke:new T["a"]({color:"#00a4ff",width:2})})});if("circleText"===e){a[i.textTarget]=String(a[i.textTarget]);var n=new F["a"]({color:a._color||i.color});return new k["b"]({image:new O["a"]({fill:n,radius:E["a"].fontSize(.4),stroke:new T["a"]({color:"#FFF",width:5})}),fill:n,text:new x["a"]({text:a[i.textTarget]||"文本",textAlign:"center",font:".16rem SimHei",offsetX:0,offsetY:0,fill:new F["a"]({color:"#FFF"})}),zIndex:a.zIndex||"auto"})}return"polygon"===e?new k["b"]({stroke:new T["a"]({width:0===i.width?0:i.width||3,color:i.strokeColor||[41,91,170,.8]}),fill:new F["a"]({color:i.fillColor||[76,172,166,.6]})}):void 0}},{key:"addHeatMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={blur:15,radius:10,weightCallBack:function(e){}},s=Object.assign(Object(r["a"])({},a),t),i=function(e){return new v["a"]({geometry:new b["a"](e.lnglat||[e.lng,e.lat]||e.position),data:e})},l=[];for(var n in e)l.push(i(e[n]));var o=new y["a"]({});o.addFeatures(l),this.layers["heatmap"]=new C["a"]({source:o,blur:s.blur||5,radius:s.radius||10,weight:function(e){if(s.weightCallBack)return s.weightCallBack(e)}}),this.map.addLayer(this.layers["heatmap"])}},{key:"removeHeatMap",value:function(){this.layers["heatmap"]&&(this.map.removeLayer(this.layers["heatmap"]),this.layers["heatmap"]=null,delete this.layers["heatmap"])}},{key:"addCluster",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={type:"cluster",clearFlag:!0,distance:40,clickFlag:!0,color:[76,172,166,.9],style:null,callback:function(){}},i=Object.assign(Object(r["a"])({},s),a);this.features[i.type]||(this.features[i.type]=[]);var l={};void 0===this.layers[i.type]&&(this.layers[i.type]=new u["a"]({source:new h["a"]({distance:i.distance,source:new y["a"]})}),this.map.addLayer(this.layers[i.type])),i.clearFlag&&this.clearFeaturesByLayerType(i.type),e.forEach((function(e){var a=new v["a"]({geometry:new b["a"](e.position||[Number(e.lng),Number(e.lat)]),data:e,type:i.type,clickFlag:i.clickFlag,chosedOption:i.chosedOption,option:i});t.features[i.type].push(a)})),this.layers[i.type].getSource().setDistance(i.distance),this.layers[i.type].getSource().getSource().addFeatures(this.features[i.type]),this.layers[i.type].setStyle(i.style||function(e){var t=e.get("features").length,a=l[t];if(1===t){var r=new F["a"]({color:i.color});return new k["b"]({image:new O["a"]({fill:r,radius:E["a"].fontSize(.1)}),fill:r})}return a||(a=new k["b"]({image:new O["a"]({radius:10,stroke:new T["a"]({color:"#fff"}),fill:new F["a"]({color:"#3399CC"})}),text:new x["a"]({text:t.toString(),fill:new F["a"]({color:"#fff"})})}),l[t]=a),a})}}]),e}();t["a"]=N}}]);