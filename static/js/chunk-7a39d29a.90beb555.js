(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a39d29a"],{"5a54":function(e,t,a){"use strict";a("617f")},"617f":function(e,t,a){},a330:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"map",attrs:{id:"map"}})},i=[],s=(a("c5f6"),a("ce5d")),l=a("f403"),n=a("4cdf"),o=a("5831"),c=a("4787"),u={name:"Index",data:function(){return{LMap:null,heatMapLayer:null}},mounted:function(){var e=this;this.LMap=new s["a"]({center:[118.281041,33.962096]}),setTimeout((function(){var t=[{total:69,lng:"118.281041",lat:"33.962096"},{total:69,lng:"118.294699",lat:"33.959553"},{total:67,lng:"118.274658",lat:"33.934377"},{total:58,lng:"118.276189",lat:"33.92138"}];e.LMap.initMap("map"),e.addHeatMap(t)}),1e3)},methods:{addHeatMap:function(e){var t={blur:15,radius:10,weightCallBack:function(e){return Number(e.get("data")["total"])}},a=function(e){return new n["a"]({geometry:new l["a"](e.lnglat||[e.lng,e.lat]||e.position),data:e})},r=[];for(var i in e)r.push(a(e[i]));var s=new o["a"]({});s.addFeatures(r),this.heatMapLayer=new c["a"]({source:s,blur:t.blur||5,radius:t.radius||10,weight:function(e){if(t.weightCallBack)return t.weightCallBack(e)}}),this.LMap.map.addLayer(this.heatMapLayer)}}},h=u,y=(a("5a54"),a("2877")),p=Object(y["a"])(h,r,i,!1,null,"01bc72e3",null);t["default"]=p.exports},ce5d:function(e,t,a){"use strict";a("6b54"),a("8449"),a("6762"),a("2fdb"),a("ac6a");var r=a("5530"),i=(a("96cf"),a("1da1")),s=(a("c5f6"),a("d4ec")),l=a("bee2"),n=(a("5bc0"),a("480c")),o=a("2ef1"),c=a("21bc"),u=a("3e6b"),h=a("5831"),y=a("55bd"),p=a("c810"),g=a("6792"),f=a("f2f0"),d=a("5eee"),m=a("a2c7"),v=a("4cdf"),b=a("f403"),w=a("5bc33"),F=a("83a6"),k=a("6c77"),O=a("ce2c"),S=a("6cbf"),x=a("8295"),T=a("8682"),L=a("0710"),C=a("4787"),_=a("ca42"),E=a("c276"),z=a("1157"),j=a.n(z),N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s["a"])(this,e),this.map=void 0,this.layers={},this.features={},this.lastFeature=null,this.resolution=[1.406250026231578,.703125013115789,.3515625065578945,.17578125327894775,.08789062663947399,.043945313319736994,.021972656659868472,.010986328329934226,.005493164164967124,.0027465820824835504,.0013732910412417797,.0006866455206208899,.0003433227603104438,.0001716613801552224,8583069007761132e-20,4291534503880566e-20,21457672519402802e-21,10728836259701401e-21,5364418129850712e-21,2682209064925356e-21,1341104532462678e-21],this.sldt="http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",this.slbz="http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i345013117!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0",this.yxdt="http://172.22.137.81:6080/arcgis/rest/services/mapsq/sq_yxdt/MapServer",this.yxbz="http://172.22.137.81:6080/arcgis/rest/services/mapsq/sq_yxzj/MapServer",this.clickCallback=null,this.partCallback=null,this.overlayFeature={},this.partLayer=null,this.partTmpWms=null,this.minZoom=t.minZoom||10,this.maxZoom=t.maxZoom||18,this.zoom=t.zoom||13,this.center=t.center||[112.993066,28.186488]}return Object(l["a"])(e,[{key:"initMap",value:function(e){var t=this;this.layers["sldt"]=new n["a"]({source:new o["a"]({url:this.sldt}),zIndex:0}),this.map=new d["a"]({target:e,layers:[this.layers["sldt"]],view:new m["a"]({projection:"EPSG:4326",center:this.center||[112.993066,28.186488],zoom:this.zoom,maxZoom:this.maxZoom,minZoom:this.minZoom}),controls:Object(c["a"])({zoom:!1,rotate:!1,attribution:!1})}),this.map.on("pointermove",(function(e){var a=t.map.getEventPixel(e.originalEvent),r=t.map.forEachFeatureAtPixel(a,(function(e){return e}));void 0===r||!r.get("features")&&!r.get("clickFlag")||r.get("features")&&1===!r.get("features").length?t.map.getTargetElement().style.cursor="auto":t.map.getTargetElement().style.cursor="pointer"})),this.map.on("singleclick",(function(e){t.clearAllOverlay();var a=t.map.getEventPixel(e.originalEvent),r=t.map.forEachFeatureAtPixel(a,(function(e){return e}));if(void 0!==r&&(r.get("clickFlag")||r.get("features")[0].get("clickFlag")&&1===r.get("features").length)){r.get("features")&&r.get("features").length&&(r=r.get("features")[0]);var i=r.get("type"),s=r.get("data"),l=r.get("option");if(t.lastFeature){var n=t.lastFeature.get("option"),o=t.lastFeature.get("data");t.lastFeature.setStyle(t.getDefaultStyle(n.styleType,n,o)),t.lastFeature=r}else t.lastFeature=r;l&&l.chosedOption&&r.setStyle(t.getDefaultStyle(l.chosedOption.styleType||l.styleType,l.chosedOption,s)),l.fitView&&(s.position||s.lng||s.lat)&&t.setViewCenter(s.position||[Number(s.lng),Number(s.lat)]),l.callback&&l.callback(i,s,r),t.clickCallback&&t.clickCallback(i,s)}else t.partCallback&&t.partCallback(e)}))}},{key:"addPartImageLayerByCode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.clearPartImageLayer();var a=new g["a"]({params:{LAYERS:"sums_440300_basic_grid_v20:wh_sys",FORMAT:"image/png",CQL_FILTER:'"properties.type"=\''.concat(e,"'"),STYLES:"sums_321300_basic_grid_v20:".concat(e)},serverType:"geoserver",url:"https://mis.sqszhcg.com/api/geoServerApi/geoserver/sums_321300_basic_grid_v20/wms"});this.partLayer=new p["a"]({source:a}),this.map.addLayer(this.partLayer)}},{key:"clearPartImageLayer",value:function(){this.partLayer&&this.map.removeLayer(this.partLayer)}},{key:"searchPartInfoByCoordinate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.length&&a){e.next=2;break}return e.abrupt("return",null);case 2:return r="contains(geometry,point(".concat(t[0]," ").concat(t[1],')) or "properties.type"=\'').concat(a,"'"),this.partTmpWms=new f["a"]({url:null,serverType:"geoserver",crossOrigin:"anonymous",params:{FORMAT:"JSON",VERSION:"1.3.0",QUERY_LAYERS:"sums_321300_basic_grid_v20:wh_sys",LAYERS:"sums_321300_basic_grid_v20:wh_sys",TRANSPARENT:!0,CQL_FILTER:r}}),i=this.partTmpWms.getFeatureInfoUrl(t,this.map.getView().getResolution(),this.map.getView().getProjection(),{INFO_FORMAT:"application/json",FEATURE_COUNT:50}),e.next=7,j.a.get(i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"changeDefalutLayersVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sl";"sl"===e?(this.layers["sldt"].setVisible(!0),this.layers["slbz"].setVisible(!0),this.layers["yxdt"].setVisible(!1),this.layers["yxbz"].setVisible(!1)):"yx"===e&&(this.layers["sldt"].setVisible(!1),this.layers["slbz"].setVisible(!1),this.layers["yxdt"].setVisible(!0),this.layers["yxbz"].setVisible(!0))}},{key:"addLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";void 0===this.layers[e]&&(this.layers[e]=new u["a"]({source:new h["a"]}),this.map.addLayer(this.layers[e]))}},{key:"initOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={type:"default",stopEvent:!1,offset:[0,0],positioning:"bottom-center"},i=Object.assign(Object(r["a"])({},a),t);this.overlayFeature[i.type]=new L["a"]({positioning:i.positioning,element:e,offset:i.offset,stopEvent:i.stopEvent}),this.map.addOverlay(this.overlayFeature[i.type])}},{key:"highLighFeature",value:function(e,t,a){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.layers[e].getSource().getFeatures().forEach((function(e){var s=e.get("data"),l=e.get("option");if(s[a]===t[a]){if(r.lastFeature){var n=r.lastFeature.get("option"),o=r.lastFeature.get("data");r.lastFeature.setStyle(r.getDefaultStyle(n.styleType,n,o)),r.lastFeature=e}else r.lastFeature=e;l.chosedOption&&e.setStyle(r.getDefaultStyle(l.chosedOption.styleType||l.styleType,l.chosedOption,t)),i&&(s.position||s.lng||s.lat)&&r.setViewCenter(s.position||[Number(s.lng),Number(s.lat)])}}))}},{key:"setViewCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e&&2===e.length&&"number"===typeof e[0]&&"number"===typeof e[1]&&(Number(e[0])<-180||Number(e[0])>180||Number(e[1])<-90||Number(e[1])>90||this.map.getView().animate({center:e,duration:t,easing:_["b"]}))}},{key:"setOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this.overlayFeature[t].setPosition(e)}},{key:"clearAllOverlay",value:function(){this.map.getOverlays().clear(),this.overlayFeature={}}},{key:"clearOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.map.removeOverlay(this.overlayFeature[e])}},{key:"addNormalFeatures",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={type:"default",textTarget:"",styleType:"point",otherStyle:null,chosedOption:null,clickFlag:!0,clearFlag:!0,fitView:!0},s=Object.assign(Object(r["a"])({},i),a);this.features[s.type]||(this.features[s.type]=[]),this.addLayers(s.type),s.clearFlag&&this.clearNormalFeatures(s.type),e.forEach((function(e){if(e.position||e.lng&&e.lat){var a=new v["a"]({geometry:new b["a"](e.position||[Number(e.lng),Number(e.lat)]),data:e,type:s.type,clickFlag:s.clickFlag,chosedOption:s.chosedOption,option:s});a.setStyle(s.otherStyle||t.getDefaultStyle(s.styleType,s,e)),t.features[s.type].push(a)}})),this.layers[s.type].getSource().addFeatures(this.features[s.type])}},{key:"clearNormalFeatures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.layers[e]&&(this.layers[e].getSource().clear(),this.features[e]=[])}},{key:"clearAllFeatures",value:function(){for(var e in this.layers)["sldt","slbz","yxdt","yxbz"].includes(e)||this.layers[e].getSource().clear();for(var t in this.features)this.features[t]=[],delete this.features[t]}},{key:"addPolygonFeatures",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={type:"defaultPolygon",clickFlag:!0,clearFlag:!0},s=Object.assign(Object(r["a"])({},i),a);this.features[s.type]||(this.features[s.type]=[]),this.addLayers(s.type),s.clearFlag&&this.clearFeaturesByLayerType(s.type),this.features[s.type]=[],e.forEach((function(e){var a={styleType:"polygon",type:s.type,dataTarget:"path",width:3,strokeColor:[41,91,170,.8],fillColor:[76,172,166,.6],selectOption:{width:3,strokeColor:[41,91,170,.4],fillColor:[76,172,166,.3]},chosedOption:{width:3,strokeColor:[41,91,170,.4],fillColor:[76,172,166,.3]}},i=Object.assign(Object(r["a"])({},a),e.option),l=new v["a"]({type:"polygon",geometry:new w["a"](e[s.dataTarget]||e.path),data:e,option:i,selectOption:i.selectOption,chosedOption:i.chosedOption,clickFlag:s.clickFlag});l.setStyle(t.getDefaultStyle(i.styleType,i)),t.features[s.type].push(l)})),this.layers[s.type].getSource().addFeatures(this.features[s.type])}},{key:"clearFeaturesByLayerType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.layers[e]&&(this.layers[e].getSource().clear(),this.features[e]=[])}},{key:"getDefaultStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"point",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={color:"rgba(0,255,255,1)",text:"",img:null},s=Object.assign(Object(r["a"])({},i),t);if("point"===e){var l=new F["a"]({color:s.color});return new k["b"]({image:new O["a"]({fill:l,radius:E["a"].fontSize(.1)}),fill:l})}if("icon"===e)return new k["b"]({image:new S["a"]({src:s.img,anchor:s.anchor||[.5,1],scale:s.scale||E["a"].fontSize(.7)/100})});if("iconText"===e)return a[s.textTarget]=String(a[s.textTarget]),new k["b"]({image:new S["a"]({src:s.img,anchor:[.5,.5],scale:E["a"].fontSize(.7)/100}),text:new x["a"]({text:a[s.textTarget]+""||"文本",textAlign:"center",font:".16rem SimHei",offsetX:0,offsetY:30,fill:new F["a"]({color:"#FFF"}),stroke:new T["a"]({color:"#00a4ff",width:2})})});if("circleText"===e){a[s.textTarget]=String(a[s.textTarget]);var n=new F["a"]({color:a._color||s.color});return new k["b"]({image:new O["a"]({fill:n,radius:E["a"].fontSize(.4),stroke:new T["a"]({color:"#FFF",width:5})}),fill:n,text:new x["a"]({text:a[s.textTarget]||"文本",textAlign:"center",font:".16rem SimHei",offsetX:0,offsetY:0,fill:new F["a"]({color:"#FFF"})}),zIndex:a.zIndex||"auto"})}return"polygon"===e?new k["b"]({stroke:new T["a"]({width:0===s.width?0:s.width||3,color:s.strokeColor||[41,91,170,.8]}),fill:new F["a"]({color:s.fillColor||[76,172,166,.6]})}):void 0}},{key:"addHeatMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={blur:15,radius:10,weightCallBack:function(e){}},i=Object.assign(Object(r["a"])({},a),t),s=function(e){return new v["a"]({geometry:new b["a"](e.lnglat||[e.lng,e.lat]||e.position),data:e})},l=[];for(var n in e)l.push(s(e[n]));var o=new h["a"]({});o.addFeatures(l),this.layers["heatmap"]=new C["a"]({source:o,blur:i.blur||5,radius:i.radius||10,weight:function(e){if(i.weightCallBack)return i.weightCallBack(e)}}),this.map.addLayer(this.layers["heatmap"])}},{key:"removeHeatMap",value:function(){this.layers["heatmap"]&&(this.map.removeLayer(this.layers["heatmap"]),this.layers["heatmap"]=null,delete this.layers["heatmap"])}},{key:"addCluster",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={type:"cluster",clearFlag:!0,distance:40,clickFlag:!0,color:[76,172,166,.9],style:null,callback:function(){}},s=Object.assign(Object(r["a"])({},i),a);this.features[s.type]||(this.features[s.type]=[]);var l={};void 0===this.layers[s.type]&&(this.layers[s.type]=new u["a"]({source:new y["a"]({distance:s.distance,source:new h["a"]})}),this.map.addLayer(this.layers[s.type])),s.clearFlag&&this.clearFeaturesByLayerType(s.type),e.forEach((function(e){var a=new v["a"]({geometry:new b["a"](e.position||[Number(e.lng),Number(e.lat)]),data:e,type:s.type,clickFlag:s.clickFlag,chosedOption:s.chosedOption,option:s});t.features[s.type].push(a)})),this.layers[s.type].getSource().setDistance(s.distance),this.layers[s.type].getSource().getSource().addFeatures(this.features[s.type]),this.layers[s.type].setStyle(s.style||function(e){var t=e.get("features").length,a=l[t];if(1===t){var r=new F["a"]({color:s.color});return new k["b"]({image:new O["a"]({fill:r,radius:E["a"].fontSize(.1)}),fill:r})}return a||(a=new k["b"]({image:new O["a"]({radius:10,stroke:new T["a"]({color:"#fff"}),fill:new F["a"]({color:"#3399CC"})}),text:new x["a"]({text:t.toString(),fill:new F["a"]({color:"#fff"})})}),l[t]=a),a})}}]),e}();t["a"]=N}}]);